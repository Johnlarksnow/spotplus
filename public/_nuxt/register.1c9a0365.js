import{_ as h}from"./nuxt-link.8ef527b5.js";import{_ as v}from"./Alert.vue.5ca93200.js";import{f as w,B as m,j as b,o as f,c as k,a as o,b as _,w as n,d as u,s as V,C as c,D as p,i as s,k as N,t as g,l as S}from"./entry.0819dfc5.js";import{u as B}from"./fetch.e9598783.js";import"./Icon.ea438a13.js";import"./config.4f48d583.js";import"./_plugin-vue_export-helper.c27b6911.js";const T={class:"flex flex-col w-full gap-3 h-full justify-center items-center"},P={class:"flex gap-2 flex-col items-start justify-center"},U=o("h1",{class:"text-2xl font-bold"}," Register ",-1),q=["onSubmit"],C=o("button",{type:"submit",class:"bg-green-900 mt-2 text-white rounded-lg py-2 px-4"}," Register ",-1),Y=w({__name:"register",setup(D){const a=m({username:"",email:"",password:"",password_repeat:""}),e=m({type:"success",icon:"tabler:check",title:"Success",message:"You have successfully registered!"}),r=b(!1);async function x(){var d;try{if(a.password!==a.password_repeat)r.value=!0,e.icon="tabler:asterisk",e.type="error",e.title="Error",e.message="Passwords do not match!",setTimeout(()=>{r.value=!1},3e3);else{const{data:t,error:i}=await B("https://supgrade-api.site/api/v1/auth/register",{method:"POST",body:JSON.stringify(a)},"$kuy4xN7t2Z");((d=t.value)==null?void 0:d.status)!=="success"||i?(r.value=!0,e.icon="tabler:x",e.type="error",e.title="Error",e.message=t.value.message||"API is not reachable!",setTimeout(()=>{r.value=!1},3e3)):(r.value=!0,e.icon="tabler:check",e.type="success",e.title="Success",e.message="You have successfully registered!",setTimeout(()=>{r.value=!1,router.push("/login")},3e3))}}catch(t){console.log(t)}}return(d,t)=>{const i=h,y=v;return f(),k("div",T,[o("div",P,[_(i,{to:"/",class:"text-green-500 font*bold text-lg hover:text-green-400 transition-all"},{default:n(()=>[u(" ← Back to home ")]),_:1}),U,o("form",{class:"flex flex-col gap-2",onSubmit:V(x,["prevent"])},[c(o("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(a).username=l),type:"text",placeholder:"Username",class:"input",required:""},null,512),[[p,s(a).username]]),c(o("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s(a).email=l),type:"email",placeholder:"Email",class:"input",required:""},null,512),[[p,s(a).email]]),c(o("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s(a).password=l),type:"password",placeholder:"Password",class:"input",required:""},null,512),[[p,s(a).password]]),c(o("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s(a).password_repeat=l),type:"password",placeholder:"Repeat Password",required:"",class:"input"},null,512),[[p,s(a).password_repeat]]),C],40,q),_(i,{to:"/login",class:"text-green-500 hover:text-green-400 transition-all"},{default:n(()=>[u(" I have an account ")]),_:1})]),s(r)?(f(),N(y,{key:0,type:s(e).type,icon:s(e).icon},{title:n(()=>[u(g(s(e).title),1)]),default:n(()=>[u(" "+g(s(e).message),1)]),_:1},8,["type","icon"])):S("",!0)])}}});export{Y as default};
